## This file managed by Chef, all changes will be overwritten ##

# LOGS/STATE
--verbose=true
--allow_admin_api=true
--api_paste_config=/etc/nova/api-paste.ini
--use_deprecated_auth=false
--auth_strategy=keystone
--dhcpbridge_flagfile=/etc/nova/nova.conf
--dhcpbridge=/usr/bin/nova-dhcpbridge
--logdir=/var/log/nova
--state_path=/var/lib/nova
--lock_path=/var/lock/nova

--##### HOSTS #####
--rabbit_host=<%=  @chef_environment %>.api.opensciencedatacloud.org
--s3_host=<%=  @chef_environment %>.api.opensciencedatacloud.org
--ec2_host=<%=  @chef_environment %>.api.opensciencedatacloud.org
--ec2_url=http://<%=  @chef_environment %>.api.opensciencedatacloud.org:8773/services/Cloud
--ec2_path=/<%=  @chef_environment %>/services/Cloud
--keystone_ec2_url=http://<%=  @chef_environment %>.api.opensciencedatacloud.org:5000/v2.0/ec2tokens
--cc_host=<%=  @chef_environment %>.api.opensciencedatacloud.org
--nova_url=http://<%=  @chef_environment %>.api.opensciencedatacloud.org:8774/v1.1/
#--routing_source_ip MUST be an IP.  It maps directly into nova-network's iptables rules
--routing_source_ip=10.103.136.67
--sql_connection=mysql://nova:thuaW9iek9baim3iesoo@<%=  @chef_environment %>.api.opensciencedatacloud.org/nova

##### SCHEDULER #####
--scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler
--scheduler_default_filters=AvailabilityZoneFilter,RamFilter,ComputeFilter,CoreFilter
--cpu_allocation_ratio=1.0
--ram_allocation_ratio=1.0
--skip_isolated_core_check=false

--##### NETWORK #####
--network_manager=nova.network.manager.FlatDHCPManager
--public_interface=eth2
--flat_interface=eth2
--flat_network_bridge=virbr1
--fixed_range=172.16.0.0/16 
--network_size=65535
--flat_network_dhcp_start=172.16.1.0
--flat_injected=False
--force_dhcp_release=true
--libvirt_use_virtio_for_bridges=true
--my_ip=<%=node['ipaddress']%>

##### GLANCE #####
--image_service=nova.image.glance.GlanceImageService
--glance_api_servers=<%=  @chef_environment %>.api.opensciencedatacloud.org:9292

##### COMPUTE #####
--connection_type=libvirt
--libvirt_type=kvm
# Command prefix to use for running commands as root (default: sudo)
--root_helper=sudo nova-rootwrap
# Should unused base images be removed? (default: false)
--remove_unused_base_images=false
# Write a checksum for files in _base to disk (default: false)
--checksum_base_images=false

##### VNCPROXY #####
--novnc_enabled=true
#novncproxy_base_url=http://<%=  @chef_environment %>.api.opensciencedatacloud.org:6081/vnc_auto.html
#vncserver_proxyclient_address=<%=  @chef_environment %>.api.opensciencedatacloud.org
#vncserver_listen=<%=  @chef_environment %>.api.opensciencedatacloud.org
#vnc_enabled=true
#vncproxy_url=http://<%=  @chef_environment %>.api.opensciencedatacloud.org:6081
#vnc_console_proxy_url=http://<%=  @chef_environment %>.api.opensciencedatacloud.org:6081

##### MISC #####
--force_raw_images=false
--allow_same_net_traffic=true
--osapi_max_limit=1000
--snapshot_image_format=qcow2
--start_guests_on_host_boot=true
--resume_guests_state_on_host_boot=true
--quota_security_groups=50
--quota_security_group_rules=20
--quota_cores=32
--quota_ram=66536

##### KEYSTONE #####
--keystone_ec2_url=http://<%=  @chef_environment %>.api.opensciencedatacloud.org:5000/v2.0/ec2tokens

##### VOLUMES #####
--iscsi_helper=tgtadm
--iscsi_ip_prefix=10.103

# This file was auto-generated by Chef for <%=node['ipaddress']%>
